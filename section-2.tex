%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Sheaf Theory}
\label{sec:sheaf-theory}

In this section, we introduce the parts of sheaf theory needed for the sequel.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Fibers}

\noindent
Suppose we have a map (function) $f: E \to B$ that looks something like this:

\begin{diagram}

\node at (-5, 0) {$E$};
\draw (-3, -0.15) ellipse (1.5cm and 1.85cm);
\node[dot, label=left:$1$] (1) at (-3.25, 1.25) {};
\node[dot, label=left:$2$] (2) at (-2.5, 0.75) {};
\node[dot, label=left:$3$] (3) at (-3, 0.25) {};
\node[dot, label=left:$4$] (4) at (-3.5, -0.25) {};
\node[dot, label=left:$5$] (5) at (-2.5, -0.5) {};
\node[dot, label=left:$6$] (6) at (-3.0, -1) {};
\node[dot, label=left:$7$] (7) at (-2.75, -1.5) {};

\node at (4.375, 0) {$B$};
\draw (3.15, 0) ellipse (0.75cm and 1.75cm);
\node[dot, label=right:$a$] (a) at (3, 1) {};
\node[dot, label=right:$b$] (b) at (3, 0) {};
\node[dot, label=right:$c$] (c) at (3, -1) {};

\node at (0, -1.625) {$f$};
\draw[arrow,->] (1) to (a);
\draw[arrow,->] (2) to (b);
\draw[arrow,->] (3) to (a);
\draw[arrow,->] (4) to (b);
\draw[arrow,->] (5) to (c);
\draw[arrow,->] (6) to (b);
\draw[arrow,->] (7) to (c);

\end{diagram}

It is sometimes convenient to turn the diagram sideways and group together points in the domain that get sent to the same target, like so:

\begin{diagram}

\node at (3, 1.85) {$E$};
\draw (0, 1.85) ellipse (2.5cm and 1cm);
\node[dot, label=above:$1$] (1) at (-2, 1.75) {};
\node[dot, label=above:$3$] (3) at (-1.5, 1.5) {};
\node[dot, label=above:$2$] (2) at (-0.5, 1.75) {};
\node[dot, label=above:$4$] (4) at (0, 2) {};
\node[dot, label=above:$6$] (6) at (0.5, 1.55) {};
\node[dot, label=above:$5$] (5) at (2, 1.75) {};
\node[dot, label=above:$7$] (7) at (1.5, 1.5) {};

\node at (3, 0) {$B$};
\draw (0, -0.15) ellipse (2.5cm and 0.75cm);
\node[dot, label=below:$a$] (a) at (-1.75, 0) {};
\node[dot, label=below:$b$] (b) at (0, 0) {};
\node[dot, label=below:$c$] (c) at (1.75, 0) {};

\node at (2.5, 0.875) {$f$};
\draw[arrow,->] (1) to (a);
\draw[arrow,->] (2) to (b);
\draw[arrow,->] (3) to (a);
\draw[arrow,->] (4) to (b);
\draw[arrow,->] (5) to (c);
\draw[arrow,->] (6) to (b);
\draw[arrow,->] (7) to (c);

\end{diagram}

That makes the pre-images very easy to see. For any point in $B$, its pre-image is just the group of points sitting ``over'' it: 

\begin{diagram}

\node at (3, 1.85) {$E$};

\draw (-1.75, 1.85) ellipse (0.7cm and 0.75cm);
\node[dot, label=above:$1$] (1) at (-2, 1.75) {};
\node[dot, label=above:$3$] (3) at (-1.5, 1.5) {};

\draw (0, 1.95) ellipse (0.85cm and 0.85cm);
\node[dot, label=above:$2$] (2) at (-0.5, 1.75) {};
\node[dot, label=above:$4$] (4) at (0, 2) {};
\node[dot, label=above:$6$] (6) at (0.5, 1.55) {};

\draw (1.75, 1.85) ellipse (0.7cm and 0.75cm);
\node[dot, label=above:$5$] (5) at (2, 1.75) {};
\node[dot, label=above:$7$] (7) at (1.5, 1.5) {};

\node at (3, 0) {$B$};
\draw (0, -0.15) ellipse (2.5cm and 0.75cm);
\node[dot, label=below:$a$] (a) at (-1.75, 0) {};
\node[dot, label=below:$b$] (b) at (0, 0) {};
\node[dot, label=below:$c$] (c) at (1.75, 0) {};

\node at (2.5, 0.875) {$f$};
\draw[arrow,->] (1) to (a);
\draw[arrow,->] (2) to (b);
\draw[arrow,->] (3) to (a);
\draw[arrow,->] (4) to (b);
\draw[arrow,->] (5) to (c);
\draw[arrow,->] (6) to (b);
\draw[arrow,->] (7) to (c);

\end{diagram}

If we stack the points in each pre-image vertically, one on top of the other, we can then think of each pre-image as a kind of ``stalk'' growing over its base point:

\begin{diagram}

\node at (2.825, 1.5) {$E$};
\draw (-1.75, 1.75) ellipse (0.5cm and 1cm);
\node[dot, label=above:$3$] (3) at (-1.75, 2) {};
\node[dot, label=above:$1$] (1) at (-1.75, 1.25) {};

\draw (0, 2.15) ellipse (0.5cm and 1.375cm);
\node[dot, label=above:$6$] (6) at (0, 2.75) {};
\node[dot, label=above:$4$] (4) at (0, 2) {};
\node[dot, label=above:$2$] (2) at (0, 1.25) {};

\draw (1.75, 1.75) ellipse (0.5cm and 1cm);
\node[dot, label=above:$7$] (7) at (1.75, 2) {};
\node[dot, label=above:$5$] (5) at (1.75, 1.25) {};

\node at (2.825, -0.15) {$B$};
\draw (0, -0.15) ellipse (2.5cm and 0.75cm);
\node[dot, label=below:$a$] (a) at (-1.75, 0) {};
\node[dot, label=below:$b$] (b) at (0, 0) {};
\node[dot, label=below:$c$] (c) at (1.75, 0) {};

\node at (2.825, 0.625) {$f$};
\draw[arrow,->] (-1.75, 1) to (a);
\draw[arrow,->] (0, 1) to (b);
\draw[arrow,->] (1.75, 1) to (c);

\end{diagram}

This gives rise to the idea of the ``fibers'' of a map. The fibers of a map are just its pre-images. For instance, the fiber over $b$ is $\{ 2, 4, 6 \}$.

% ----------------------------------------
\begin{Definition}[Fibers]

Given a map $f : E \to B$ and a point $y \in B$, the fiber over $y$ is its pre-image $\preimage{f}(y)$ = $\{ x \mid f(x) = y \}$. $B$ is called the base space of $f$, and $y$ the base point of the fiber.

\end{Definition}

We can take a cross-section of one or more fibers by selecting a point from each of the fibers in question. For instance, we can take $3$, $4$, and $7$ as a cross-section of the fibers $\preimage{f}(a)$, $\preimage{f}(b)$, and $\preimage{f}(c)$:

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.75, 2.15) rectangle (2.75, 1.875);

\node at (2.825, 1.5) {$E$};
\draw (-1.75, 1.75) ellipse (0.5cm and 1cm);
\node[dot, label=above:$3$] (3) at (-1.75, 2) {};
\node[dot, label=above:$1$] (1) at (-1.75, 1.25) {};

\draw (0, 2.15) ellipse (0.5cm and 1.375cm);
\node[dot, label=above:$6$] (6) at (0, 2.75) {};
\node[dot, label=above:$4$] (4) at (0, 2) {};
\node[dot, label=above:$2$] (2) at (0, 1.25) {};

\draw (1.75, 1.75) ellipse (0.5cm and 1cm);
\node[dot, label=above:$7$] (7) at (1.75, 2) {};
\node[dot, label=above:$5$] (5) at (1.75, 1.25) {};

\node at (2.825, -0.15) {$B$};
\draw (0, -0.15) ellipse (2.5cm and 0.75cm);
\node[dot, label=below:$a$] (a) at (-1.75, 0) {};
\node[dot, label=below:$b$] (b) at (0, 0) {};
\node[dot, label=below:$c$] (c) at (1.75, 0) {};

\node at (2.825, 0.625) {$f$};
\draw[arrow,->] (-1.75, 1) to (a);
\draw[arrow,->] (0, 1) to (b);
\draw[arrow,->] (1.75, 1) to (c);

\end{diagram}

We can also take cross-sections local to only some of the fibers. For instance, we can take $1$ and $4$ as a cross-section of $\preimage{f}(a)$ and $\preimage{f}(b)$:

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.5, 1.05) -- (0.7, 2.45) -- (0.8, 2.2) -- (-2.4, 0.8) -- cycle;

\node at (2.825, 1.5) {$E$};
\draw (-1.75, 1.75) ellipse (0.5cm and 1cm);
\node[dot, label=above:$3$] (3) at (-1.75, 2) {};
\node[dot, label=above:$1$] (1) at (-1.75, 1.25) {};

\draw (0, 2.15) ellipse (0.5cm and 1.375cm);
\node[dot, label=above:$6$] (6) at (0, 2.75) {};
\node[dot, label=above:$4$] (4) at (0, 2) {};
\node[dot, label=above:$2$] (2) at (0, 1.25) {};

\draw (1.75, 1.75) ellipse (0.5cm and 1cm);
\node[dot, label=above:$7$] (7) at (1.75, 2) {};
\node[dot, label=above:$5$] (5) at (1.75, 1.25) {};

\node at (2.825, -0.15) {$B$};
\draw (0, -0.15) ellipse (2.5cm and 0.75cm);
\node[dot, label=below:$a$] (a) at (-1.75, 0) {};
\node[dot, label=below:$b$] (b) at (0, 0) {};
\node[dot, label=below:$c$] (c) at (1.75, 0) {};

\node at (2.825, 0.625) {$f$};
\draw[arrow,->] (-1.75, 1) to (a);
\draw[arrow,->] (0, 1) to (b);
\draw[arrow,->] (1.75, 1) to (c);

\end{diagram}

% ----------------------------------------
\begin{Definition}[Sections]

Given a map $f : E \to B$ and a subset of base points $C \subseteq B$, a section of $f$ (over $C$) is a choice of one element from each fiber over each base point $x \in C$.

\end{Definition}

% ----------------------------------------
\begin{Remark}
\label{remark:section-terminology}

Since each point in a fiber amounts to a section over the fiber's base, the elements of a fiber are often just called the sections of the fiber. 

\end{Remark}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Spaces}

\noindent
In the above examples, the base $B$ was a set. We often want to consider bases that have more structure, e.g., bases that have spatial structure.

In traditional topology, spaces are built out of the points of the space. Given a set of points, a topology on that set specifies which points belong in which regions of the space.

% ----------------------------------------
\begin{Definition}[Topology]

Let $X$ be a non-empty set, thought of as the points of the space. A topology on X is a collection $T$ of subsets of $X$, thought of as the regions of the space and called the open sets (or just the opens) of $T$, that satisfy the following conditions:

\begin{enumerate}

\item [(T1)] The empty set and the whole set are open: 

$$\EmptySet/ \in T, X \in T.$$

\item [(T2)] Arbitrary unions of opens are open:

$$\text{if } \{ U_{i} \}_{i \in I} \subseteq T, \text{ then } \bigcup\limits_{i \in I} U_{i} \in T.$$

\item [(T3)] Finite intersections of opens are open: 

$$\text{if } U_{1}, \ldots, U_{n} \in T, \text{ then } \bigcap\limits_{i=1}^{n} U_{i} \in T.$$

\end{enumerate} 

\end{Definition}

These conditions encode the way that spatial regions are put together. For instance, it ensures that if two regions overlap, then their overlapping area is a region too.

\begin{Remark}

The regions of a topology, ordered by inclusion, form a complete lattice. Since the topology includes arbitrary unions, the join of this lattice is set union, but since the topology includes only finite intersections, the meet of this lattice is the \emph{interior} of set intersection.

\end{Remark}


% ----------------------------------------
\begin{Example}
\label{ex:topology}

Let $X = \{ a, b, c \}$. One possible topology is $T = \{ \EmptySet/, \{ b \}, \{ a, b \}, \{ b, c \}, \{a, b, c \} \}$. If we draw dashed circles around each of the opens (regions), we get:

\begin{diagram}

\node[dot, label=below:$a$] (a) at (-1.75, 0) {};
\node[dot, label=below:$b$] (b) at (0, 0) {};
\node[dot, label=below:$c$] (c) at (1.75, 0) {};

\draw[dashed] (0, 0) ellipse (2.5cm and 1.55cm);
\draw[dashed] (0, -0.1) ellipse (0.5cm and 0.5cm);
\draw[dashed] (-0.75, -0.1) ellipse (1.55cm and 1cm);
\draw[dashed] (0.75, -0.1) ellipse (1.55cm and 1cm);

\end{diagram}

There are two regions $\{ a, b \}$ and $\{ b, c \}$ that overlap at $b$ (so $\{ b \}$ is a region in $T$ too). There is also the full region $\{ a, b, c \}$, which is the union of the smaller regions.

We can draw $T$ as a Hasse diagram, which shows that the regions form a lattice:

\begin{diagram}

\node (abc) at (0, 3) {$\{ a, b, c \}$};
\node (ab) at (-1, 2) {$\{ a, b \}$};
\node (bc) at (1, 2) {$\{ b, c \}$};
\node (b) at (0, 1) {$\{ b \}$};
\node (emptyset) at (0, 0) {$\EmptySet/$};

\draw (emptyset) to (b);
\draw (b) to (ab);
\draw (b) to (bc);
\draw (ab) to (abc);
\draw (bc) to (abc);

\end{diagram}

\end{Example}

The lattice structure suggests that much of what is important about a space is not so much its points, but rather its opens/regions. This leads to the idea that topology-like reasoning can be done without the points. So, we can generalize: take a topology, and drop the points. That leaves just the opens/regions, which we call a frame (or locale).


% ----------------------------------------
\begin{Definition}[Frames/locales]

A frame (synonymously, a locale) $\category{L}$ is a partially ordered set $L$ (whose elements are called opens or regions) that satisfies the following conditions:

\begin{enumerate}

\item [(L1)] $L$ is a complete lattice:

  \begin{itemize}
  \item Every subset $S \subseteq L$ has a join, denoted $\bigjoin/ S.$
  \item Every finite subset $F \subseteq L$ has a meet, denoted $\bigmeet/ F.$
  \end{itemize}

\item [(L2)] Finite meets distribute over arbitrary joins:
$$
  a \meet/ \bigjoin/\limits_{i \in I} b_{i} = \bigjoin/\limits_{i \in I} (a \meet/ b_{i}),
  \text{ for all } a \in L \text{ and all families } \{ b_{i} \}_{i \in I} \subseteq L.
$$

\end{enumerate}

\noindent
Define $V \childOf/ U$ (read ``$V$ is included in $U$'') by $a = a \meet/ b$.

\end{Definition}


% ----------------------------------------
\begin{Remark}

The fact that $V \childOf/ U$ is equivalent to $a = a \meet/ b$ means we can deal with the opens of a frame algebraically (via $\meet/$ and $\join/$ operations), or order-theoretically (via the $\childOf/$ relation), whichever is more convenient. 

\end{Remark}

\begin{Remark}

The category of locales is defined as the dual/opposite of the category of frames, and so frames and locales are quite literally the very same objects. In practice, frames are often used for algebraic purposes, and locales are used for (generalized) spatial purposes. Here, we will have no reason to distinguish these two roles, and so we will use the names ``frame'' and ``locale'' interchangeably. 

\end{Remark}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Presentations of locales}

\noindent
Locales have presentations much like groups and other algebraic structures. To give the presentation of a locale, specify a set of generators and relations. 


% ----------------------------------------
\begin{Definition}[Presentations]

A presentation $\tuple{G, R}$ of a locale $\category{L}$ is comprised of: 

\begin{enumerate}

\item [(P1)] A set of generators $G = \{ U_{k}, U_{m}, \ldots \}$.
\item [(P2)] A set of relations $R \subseteq G \times G$ on those generators.

\end{enumerate}

\noindent
The locale $\category{L}$ presented by $\tuple{G, R}$ is the smallest one freely generated from $G$ which satisfies $R$.

\end{Definition}

% ----------------------------------------
\begin{Remark}

Every locale has a presentation, and a locale can have multiple presentations.

\end{Remark}

To calculate the locale that corresponds to a presentation, start with the generators, then take all finite meets and all arbitrary joins that satisfy $R$ (and of course L1 and L2).


% ----------------------------------------
\begin{Example}
\label{ex:locale-with-overlap-and-bottom}

Let a locale $\category{L}$ be given by the presentation $\tuple{G, R}$ where:

\begin{itemize}

\item $G = \{ \bottom/, U_{1}, U_{2}, U_{3} \}$.
\item $R = \{ \bottom/ \childOf/ U_{1}, U_{1} \childOf/ U_{2}, U_{1} \childOf/ U_{3} \}$.

\end{itemize}

There are four generators ($\bottom/$, $U_{1}$, $U_{2}$, and $U_{3}$), and $\bottom/$ is below $U_{1}$ while $U_{1}$ is a sub-region of $U_{2}$ and $U_{3}$. Since $U_{1}$ is a sub-region of both $U_{2}$ and $U_{3}$, $U_{1}$ is their meet:

\begin{itemize}

\item $U_{1} = U_{2} \meet/ U_{3}$.

\end{itemize}

At this point, we have generated this much of the locale:

\begin{diagram}

\node (U2) at (-2, 1.5) {$U_{2}$};
\node (U3) at (2, 1.5) {$U_{3}$};
\node (U1) at (0, 0) {$U_{1}$};
\node (bottom) at (0, -1) {$\bottom/$};

\draw (bottom) to (U1);
\draw (U1) to (U2);
\draw (U1) to (U3);

\end{diagram}

$R$ says nothing to constrain joins, so we need to join everything we can. In this case, we need to join $U_{2}$ and $U_{3}$:

\begin{diagram}

\node (U2_v_U3) at (0, 3) {$U_{2} \join/ U_{3}$};
\node (U2) at (-2, 1.5) {$U_{2}$};
\node (U3) at (2, 1.5) {$U_{3}$};
\node (U1) at (0, 0) {$U_{1}$};
\node (bottom) at (0, -1) {$\bottom/$};

\draw (bottom) to (U1);
\draw (U1) to (U2);
\draw (U1) to (U3);
\draw (U2) to (U2_v_U3);
\draw (U3) to (U2_v_U3);

\end{diagram}

There are no further joins or meets that aren't already represented in the picture. For instance, all further non-trivial meets are already accounted for:

\begin{itemize}

\item $U_{1} \meet/ \bottom/ = \bottom/$.
\item $U_{2} \meet/ U_{1} = U_{1}$ and $U_{3} \meet/ U_{1} = U_{1}$.
\item $U_{2} \meet/ \bottom/ = \bottom/$ and $U_{3} \meet/ \bottom/ = \bottom/$.
\item $(U_{2} \join/ U_{3}) \meet/ U_{2} = U_{2}$ and $(U_{2} \join/ U_{3}) \meet/ U_{3} = U_{3}$.
\item $(U_{2} \join/ U_{3}) \meet/ U_{1} = U_{1}$.
\item $(U_{2} \join/ U_{3}) \meet/ \bottom/ = \bottom/$.

\end{itemize}

Similarly, all other non-trivial joins are also already accounted for:

\begin{itemize}

\item $\bottom/ \join/ U_{1} = U_{1}$.
\item $\bottom/ \join/ U_{2} = U_{2}$ and $\bottom/ \join/ U_{3} = U_{3}$.
\item $\bottom/ \join/ (U_{2} \join/ U_{3}) = U_{2} \join/ U_{3}$.
\item $U_{1} \join/ U_{2} = U_{2}$ and $U_{1} \join/ U_{3} = U_{3}$.
\item $U_{2} \join/ (U_{2} \join/ U_{3}) = U_{2} \join/ U_{3}$ and $U_{2} \join/ (U_{3} \join/ U_{3}) = U_{2} \join/ U_{3}$.

\end{itemize}

\end{Example}


% ----------------------------------------
\begin{Example}
\label{ex:three-element-discrete-frame}

Let $\category{L} = \tuple{G, R}$ be given by:

\begin{itemize}

\item $G = \{ U_{1}, U_{2}, U_{3} \}$.
\item $R = \EmptySet/$.

\end{itemize}

We have three generators ($U_{1}$, $U_{2}$, and $U_{3}$), and there are no relations restricting how those generators are related. Thus, the locale that is freely generated from this presentation is isomorphic to the power set of three elements:

\begin{diagram}

\node (123) at (0, 4.5) {$\top = U_{1} \join/ U_{2} \join/ U_{3}$};
\node (12) at (-2, 3) {$U_{1} \join/ U_{2}$};
\node (13) at (0, 3) {$U_{1} \join/ U_{3}$};
\node (23) at (2, 3) {$U_{2} \join/ U_{3}$};
\node (1) at (-2, 1.5) {$U_{1}$};
\node (2) at (0, 1.5) {$U_{2}$};
\node (3) at (2, 1.5) {$U_{3}$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw (bottom) to (1);
\draw (bottom) to (2);
\draw (bottom) to (3);
\draw (1) to (12);
\draw (1) to (13);
\draw (2) to (12);
\draw (2) to (23);
\draw (3) to (13);
\draw (3) to (23);
\draw (12) to (123);
\draw (13) to (123);
\draw (23) to (123);

\end{diagram}

\end{Example}

A presentation provides the most ``minimal'' information from which the rest of the locale is generated. At first glance, it might be tempting to think that these generators are ``atomic'' or indivisible regions --- the fundamental pieces of the locale.

But this intuition is misleading. A generator in a presentation can sometimes be expressed as the nontrivial meet or join of other generators. In this sense, some generators are actually composite rather than truly atomic.

The genuinely indivisible generators — the true primitives — are exactly those that cannot be built nontrivially from other generators using meet and join. These are the elements that serve as the irreducible building blocks of the locale.

To make this precise, we first define what it means to be built trivially or nontrivially from other generators via meet and join.

% ----------------------------------------
\begin{Definition}[Trivial meet-constructions]

Given a presentation $\category{L} = \tuple{G, R}$, a meet construction of generators, i.e.

\[
U = \bigmeet/^{n}_{i = 1} U_{i}
\]

\noindent
with each $U_{i} \in G$, is a trivial meet-construction if the meet is equal to one of its factors, i.e. if

\[
U = U_{i} \text{ for some } i.
\]

\end{Definition}

% ----------------------------------------
\begin{Definition}[Trivial join-constructions]

Given a presentation $\category{L} = \tuple{G, R}$, a join construction of generators, i.e.

\[
U = \bigjoin/^{n}_{i = 1} U_{i}
\]

\noindent
with each $U_{i} \in G$, is a trivial join-construction if the join is equal to one of its factors, i.e. if

\[
U = U_{i} \text{ for some } i.
\]

\end{Definition}

Intuitively, trivial meet- and join-constructions do not genuinely combine multiple pieces. The result is already contained in the inputs.

% ----------------------------------------
\begin{Definition}[Meet-primitive generators]

Given a presentation $\category{L} = \tuple{G, R}$, a region $U \in G$ is meet-primitive (primitive for short) if every meet-construction 

\[
U = \bigmeet/^{n}_{i = 1} U_{i}
\]

\noindent
with each $U_{i} \in G$ is trivial.

\end{Definition}

Intuitively, a generator is meet-primitive if it cannot be assembled from larger ones by taking meets.

% ----------------------------------------
\begin{Definition}[Join-primitive generators]

Given a presentation $\category{L} = \tuple{G, R}$, a region $U \in G$ is join-primitive (primitive for short) if every join-construction 

\[
U = \bigmeet/^{n}_{i = 1} U_{i}
\]

\noindent
with each $U_{i} \in G$ is trivial.

\end{Definition}

Intuitively, a generator is join-primitive if it cannot be assembled from smaller ones by taking joins.

\begin{Remark}

In the technical literature, meet-primitive generators are often called meet-irreducible.

\end{Remark}

\begin{Example}

Take the locale from \cref{ex:locale-with-overlap-and-bottom}. $U_{1}$ is the overlap of $U_{2}$ and $U_{3}$, and $U_{2}$ and $U_{3}$ are strictly larger regions than $U_{1}$, so $U_{1}$ is not primitive.

By contrast, $U_{2}$ and $U_{3}$ are primitive, because they cannot be obtained as the meet of two strictly larger regions. Similarly, $\bottom/$ is primitive, because it is not the meet of two strictly larger regions either (it is the meet of only one strictly larger region, namely $U_{1}$). 

\end{Example}

We can see the minimal meet-primitive generators of a locale as its atomic regions.

% ----------------------------------------
\begin{Definition}[Atomic regions]

Given a presentation $\category{L} = \tuple{G, R}$, the atomic regions of $\category{L}$, denoted $\atomsOf{\category{L}}$, are the minimal primitive generators of $\category{L}$, i.e. those generators $g \in G$ that satisfy the following two conditions:

\begin{enumerate}

\item [(A1)] \emph{Meet-primitive}. $g$ is meet-primitive.

\item [(A2)] \emph{Minimality}. There is no strictly smaller meet-primitive $h$ with $h \childOf/ g$.

\end{enumerate}

\end{Definition} 

\todo{use ``primitive'' or ``fundamental'' instead of ``atomic''? An atomic thing can't be broken down, but a meet-irreducible element does have a part!}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Presheaves}

\noindent
Above we considered the fibers of a map $f : E \to B$, where $E$ and $B$ were sets. We can also consider fibers over locales, where the fibers respect the locale's structure. This is called a presheaf. A presheaf is an assignment of data to each of a locale's regions that is ``stable under restriction,'' i.e., that respects zooming in and out.

% ----------------------------------------
\begin{Definition}[Presheaf]

Let $\category{L}$ be a locale, and let $\morphisms/(\category{L})$ be $\{ \tuple{A, B} \mid A \childOf/ B \in \category{L} \}$. A presheaf on $\category{L}$ is a pair $\tuple{F, \{ \restrict{B}{A} \}_{\tuple{A, B} \in \morphisms/(\category{L})}}$, where:

\begin{itemize}

\item $F$ assigns to each region $U \in L$ some data $F(U)$.

\item $\{ \restrict{B}{A} \}_{\tuple{A, B} \in \morphisms/(\category{L})}$ is a family of maps $\restrict{B}{A} : F(B) \to F(A)$ (called ``restriction maps''), each of which specifies how to restrict the data over $F(B)$ down to the data over $F(A)$.

\end{itemize}

\noindent
All together, $\tuple{F, \{ \restrict{B}{A} \}_{\tuple{A, B} \in \morphisms/(\category{L})}}$ must satisfy the following conditions:

\begin{enumerate}

\item [(R1)] Restrictions preserve identity:
$$\restrict{U}{U} = \ident{U} \text{ (the identity on $U$), for every } U \in \category{L}.$$

\item [(R2)] Restrictions compose:
$$\text{If } A \childOf/ B \text{ and } B \childOf/ C, \text{ then } \restrict{C}{A} = \restrict{B}{A} \compose/ \restrict{C}{B}.$$

\end{enumerate}

\end{Definition}

Since $F$ assigns data $F(U)$ to each region $U \in \category{L}$, we can think of the $F(U)$s as the ``fibers'' over $\category{L}$, and the restriction maps as ``zoom in'' maps that go from bigger fibers down to smaller fibers.


% ----------------------------------------
\begin{Example}
\label{ex:presheaf}

Let $\category{L}$ be a locale $\{ \bottom/, W, V, U \}$ with the following structure:

\begin{diagram}

\node (U) at (0, 3) {$U$};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw (bottom) to (V);
\draw (bottom) to (W);
\draw (V) to (U);
\draw (W) to (U);

\end{diagram}

Next, let's define a presheaf $F$ as follows:

\begin{itemize}

\item $F(U) = \{ a, b, c, d \}$, $F(V) = \{ a, b \}$, $F(W) = \{ c, d \}$, $F(\bottom/) = \{ \ast \}$.

\item Define $\restrict{U}{V}$ as the projection (send $a$ to $a$, $b$ to $b$, and the rest can go anywhere), and similarly for $\restrict{U}{W}$. Let $\restrict{U}{\bottom/}$, $\restrict{V}{\bottom/}$, and $\restrict{W}{\bottom/}$ send their data to $\{ \ast \}$, and let the rest be identities.

\end{itemize}

We can see $F$'s assignments as fibers over $\category{L}$ by drawing them over the regions they are assigned to. For instance, over $U$ we have $F(U)$, i.e., $\{ a, b, c, d \}$:

\begin{diagram}

\node (U) at (0, 3) {$U$};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed] (bottom) to (V);
\draw[dashed] (bottom) to (W);
\draw[dashed] (V) to (U);
\draw[dashed] (W) to (U);

\draw (0, 3.25) to (0, 3.775);
\draw (0, 4.625) ellipse (1.1cm and 1.1cm);
\node[dot, label=above:{$a$}] at (-0.375, 4.1) {};
\node[dot, label=above:{$b$}] at (-0.375, 4.85) {};
\node[dot, label=above:{$c$}] at (0.375, 4.1) {};
\node[dot, label=above:{$d$}] at (0.375, 4.85) {};

\end{diagram}

Similarly, over $V$ and $W$, we have $F(V) = \{ a, b \}$ and $F(W) = \{ c, d \}$:

\begin{diagram}

\node (U) at (0, 3) {$U$};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed] (bottom) to (V);
\draw[dashed] (bottom) to (W);
\draw[dashed] (V) to (U);
\draw[dashed] (W) to (U);

\draw (0, 3.25) to (0, 3.775);
\draw (0, 4.625) ellipse (1.1cm and 1.1cm);
\node[dot, label=above:{$a$}] at (-0.375, 4.1) {};
\node[dot, label=above:{$b$}] at (-0.375, 4.85) {};
\node[dot, label=above:{$c$}] at (0.375, 4.1) {};
\node[dot, label=above:{$d$}] at (0.375, 4.85) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] at (-2, 2.5) {};
\node[dot, label=above:{$b$}] at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$c$}] at (2, 2.5) {};
\node[dot, label=above:{$d$}] at (2, 3.25) {};

\end{diagram}

Finally, over $\bottom/$, we have a singleton set:

\begin{diagram}

\node (U) at (0, 3) {$U$};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed] (bottom) to (V);
\draw[dashed] (bottom) to (W);
\draw[dashed] (V) to (U);
\draw[dashed] (W) to (U);

\draw (0, 3.25) to (0, 3.775);
\draw (0, 4.625) ellipse (1.1cm and 1.1cm);
\node[dot, label=above:{$a$}] at (-0.375, 4.1) {};
\node[dot, label=above:{$b$}] at (-0.375, 4.85) {};
\node[dot, label=above:{$c$}] at (0.375, 4.1) {};
\node[dot, label=above:{$d$}] at (0.375, 4.85) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] at (-2, 2.5) {};
\node[dot, label=above:{$b$}] at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$c$}] at (2, 2.5) {};
\node[dot, label=above:{$d$}] at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.25) ellipse (0.375cm and 0.575cm);
\node[dot, label=above:{$\ast$}] at (0, 1) {};

\end{diagram}

The restriction maps show how to ``zoom in'' on the parts (sub-fibers) of any given fiber. For instance, we can see that the fiber over $V$ is contained in the fiber over $U$. The restriction map just projects that sub-fiber out, thereby showing us how to ``zoom in'' on that sub-fiber:

\begin{diagram}

\node (U) at (0, 3) {$U$};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed] (bottom) to (V);
\draw[dashed] (bottom) to (W);
\draw[dashed] (V) to (U);
\draw[dashed] (W) to (U);

\draw (0, 3.25) to (0, 3.775);
\draw (0, 4.625) ellipse (1.1cm and 1.1cm);
\node[dot, label=above:{$a$}] (Ua) at (-0.375, 4.1) {};
\node[dot, label=above:{$b$}] (Ub) at (-0.375, 4.85) {};
\node[dot, label=above:{$c$}] (Uc) at (0.375, 4.1) {};
\node[dot, label=above:{$d$}] (Ud) at (0.375, 4.85) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$c$}] (Wc) at (2, 2.5) {};
\node[dot, label=above:{$d$}] (Wd) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.25) ellipse (0.375cm and 0.575cm);
\node[dot, label=above:{$\ast$}] (bottom) at (0, 1) {};

\draw[dashed] (-0.375, 4.625) ellipse (0.375cm and 0.875cm);
\draw[dashed] (-0.375, 3.25) to (-0.375, 3.85);
\draw[arrow, ->] (Ub) to (Vb);
\draw[arrow, ->] (Ua) to (Va);
\node at (-1.675, 4.5) {$\restrict{U}{V}$};

\end{diagram}

It's similar for the fiber over $W$:

\begin{diagram}

\node (U) at (0, 3) {$U$};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed] (bottom) to (V);
\draw[dashed] (bottom) to (W);
\draw[dashed] (V) to (U);
\draw[dashed] (W) to (U);

\draw (0, 3.25) to (0, 3.775);
\draw (0, 4.625) ellipse (1.1cm and 1.1cm);
\node[dot, label=above:{$a$}] (Ua) at (-0.375, 4.1) {};
\node[dot, label=above:{$b$}] (Ub) at (-0.375, 4.85) {};
\node[dot, label=above:{$c$}] (Uc) at (0.375, 4.1) {};
\node[dot, label=above:{$d$}] (Ud) at (0.375, 4.85) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$c$}] (Wc) at (2, 2.5) {};
\node[dot, label=above:{$d$}] (Wd) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.25) ellipse (0.375cm and 0.575cm);
\node[dot, label=above:{$\ast$}] (bottom) at (0, 1) {};

\draw[dashed] (0.375, 4.625) ellipse (0.375cm and 0.875cm);
\draw[dashed] (0.375, 3.25) to (0.375, 3.85);
\draw[arrow, ->] (Ud) to (Wd);
\draw[arrow, ->] (Uc) to (Wc);
\node at (1.675, 4.5) {$\restrict{U}{W}$};

\end{diagram}

Restricting a fiber to itself is just the identity on the fiber:

\begin{diagram}

\node (U) at (0, 3) {$U$};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed] (bottom) to (V);
\draw[dashed] (bottom) to (W);
\draw[dashed] (V) to (U);
\draw[dashed] (W) to (U);

\draw (0, 3.25) to (0, 3.775);
\draw (0, 4.625) ellipse (1.1cm and 1.1cm);
\node[dot, label=above:{$a$}] (Ua) at (-0.375, 4.1) {};
\node[dot, label=above:{$b$}] (Ub) at (-0.375, 4.85) {};
\node[dot, label=above:{$c$}] (Uc) at (0.375, 4.1) {};
\node[dot, label=above:{$d$}] (Ud) at (0.375, 4.85) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$c$}] (Wc) at (2, 2.5) {};
\node[dot, label=above:{$d$}] (Wd) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.25) ellipse (0.375cm and 0.575cm);
\node[dot, label=above:{$\ast$}] (bottom) at (0, 1) {};

\draw[arrow, ->] (Vb) to[out=215,in=155,looseness=35] (Vb);
\draw[arrow, ->] (Va) to[out=215,in=155,looseness=35] (Va);
\node at (-3.175, 2.875) {$\restrict{V}{V}$};

\end{diagram}

The other restriction maps restrict down to the singleton set. For instance:

\begin{diagram}

\node (U) at (0, 3) {$U$};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed] (bottom) to (V);
\draw[dashed] (bottom) to (W);
\draw[dashed] (V) to (U);
\draw[dashed] (W) to (U);

\draw (0, 3.25) to (0, 3.775);
\draw (0, 4.625) ellipse (1.1cm and 1.1cm);
\node[dot, label=above:{$a$}] (Ua) at (-0.375, 4.1) {};
\node[dot, label=above:{$b$}] (Ub) at (-0.375, 4.85) {};
\node[dot, label=above:{$c$}] (Uc) at (0.375, 4.1) {};
\node[dot, label=above:{$d$}] (Ud) at (0.375, 4.85) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$c$}] (Wc) at (2, 2.5) {};
\node[dot, label=above:{$d$}] (Wd) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.25) ellipse (0.375cm and 0.575cm);
\node[dot, label=above:{$\ast$}] (bottom) at (0, 1) {};

\draw[arrow, ->] (Vb) to (bottom);
\draw[arrow, ->] (Va) to (bottom);
\node at (-0.45, 2.15) {$\restrict{V}{\bottom/}$};

\end{diagram}

All of this makes it clear that the structure of the presheaf data that sits in the fibers over $\category{L}$ mimics (respects) the structure of the base locale:

\begin{diagram}

\node (U) at (0, 3) {$U$};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed] (bottom) to (V);
\draw[dashed] (bottom) to (W);
\draw[dashed] (V) to (U);
\draw[dashed] (W) to (U);

\draw (0, 3.25) to (0, 3.775);
\draw (0, 4.625) ellipse (1.1cm and 1.1cm);
\node[dot, label=above:{$a$}] (Ua) at (-0.375, 4.1) {};
\node[dot, label=above:{$b$}] (Ub) at (-0.375, 4.85) {};
\node[dot, label=above:{$c$}] (Uc) at (0.375, 4.1) {};
\node[dot, label=above:{$d$}] (Ud) at (0.375, 4.85) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$c$}] (Wc) at (2, 2.5) {};
\node[dot, label=above:{$d$}] (Wd) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.25) ellipse (0.375cm and 0.575cm);
\node[dot, label=above:{$\ast$}] (bottom) at (0, 1) {};

\draw[arrow, ->] (Ub) to (Vb);
\draw[arrow, ->] (Ua) to (Va);
\node at (-1.675, 4.5) {$\restrict{U}{V}$};

\draw[arrow, ->] (Ud) to (Wd);
\draw[arrow, ->] (Uc) to (Wc);
\node at (1.675, 4.5) {$\restrict{U}{W}$};

\draw[arrow, ->] (Vb) to (bottom);
\draw[arrow, ->] (Va) to (bottom);
\node at (-0.45, 2.15) {$\restrict{V}{\bottom/}$};

\draw[arrow, ->] (Wd) to (bottom);
\draw[arrow, ->] (Wc) to (bottom);
\node at (0.45, 2.15) {$\restrict{W}{\bottom/}$};

\end{diagram}

\end{Example}

% ----------------------------------------
\begin{Remark}

In line with \cref{remark:section-terminology}, the elements of each fiber $F(U)$ are usually just called the ``sections'' of $F(U)$. For instance, $c$ is a section of $F(W)$, as is $d$.

\end{Remark}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Sheaves}

\noindent
The definition of a presheaf requires only that the data be stable under restriction (zooming in on a region). It does not require that the data fit together across different regions (fibers).

A sheaf is a presheaf with an added gluing condition: whenever you have compatible data on overlapping fibers, there must be a unique way to glue it together into data over the union. In other words, the data in the fibers must agree on overlap and combine coherently.

To get at this idea, let's first define a cover. A cover of a region $U$ is a selection of sub-regions that covers $U$ in its entirety. The chosen sub-regions don't leave any part of $U$ exposed.

% ----------------------------------------
\begin{Definition}[Cover]

Let $\category{L}$ be a topology or a locale, and let $U$ be a region of $\category{L}$. A cover of $U$ is a family $\{ U_{i} \}_{i \in I} \subseteq \category{L}$ such that:

$$U = \bigjoin/\limits_{i \in I} \{ U_{i} \}.$$

\noindent
In other words, a cover of $U$ is a family of regions that join together to form $U$.

\end{Definition}


% ----------------------------------------
\begin{Example}

Take the topology from \cref{ex:topology}: $T = \{ \EmptySet/$, $\{ b \}$, $\{ a, b \}$, $\{ b, c \}$, $\{a, b, c \} \}$. A cover of $\{ a, b, c \}$ is $\{ a, b \}$ and $\{ b, c \}$, because altogether, $\{ a, b \}$ and $\{ b, c \}$ cover all of the points in $\{ a, b, c \}$.

Another cover of $\{ a, b, c \}$ is $\{ \{ a, b \}, \{ b, c \}, \{ b \} \}$. Although $\{ b \}$ is redundant here, this choice of sub-regions still entirely covers $\{ a, b, c \}$ as required.

\end{Example}


% ----------------------------------------
\begin{Example}

In the context of frames, where there are no points, a cover of $U$ is just a selection of sub-regions of $U$ that together join together to form $U$. Take the locale from \cref{ex:presheaf}:

\begin{diagram}

\node (U) at (0, 3) {$U$};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw (bottom) to (V);
\draw (bottom) to (W);
\draw (V) to (U);
\draw (W) to (U);

\end{diagram}

\noindent
A cover of $U$ is $\{ V, W \}$, since $U = \bigjoin/ \{ V, W \}$:

\begin{diagram}

\draw[fill=selected] (-2, 1.5) ellipse (0.5cm and 0.5cm);
\draw[fill=selected] (2, 1.5) ellipse (0.5cm and 0.5cm);

\node (U) at (0, 3) {$U$};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {\textcolor{faded}{$\bottom/$}};

\draw[faded] (bottom) to (V);
\draw[faded] (bottom) to (W);
\draw (V) to (U);
\draw (W) to (U);

\end{diagram}

A cover of $V$ is just $\{ V \}$:

\begin{diagram}

\draw[fill=selected] (-2, 1.5) ellipse (0.5cm and 0.5cm);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {\textcolor{faded}{$W$}};
\node (bottom) at (0, 0) {\textcolor{faded}{$\bottom/$}};

\draw[faded] (bottom) to (V);
\draw[faded] (bottom) to (W);
\draw[faded] (V) to (U);
\draw[faded] (W) to (U);

\end{diagram}
 
\end{Example}


% ----------------------------------------
\begin{Remark}

A cover over the least element of a locale (or a topology) is empty (the empty set), because there are no regions (or points) to cover. 

\end{Remark}


Given a presheaf $F$ over a locale $\category{L}$, if we have a cover $\{ U_{i} \}_{i \in I}$ of some portion of $\category{L}$, there is a corresponding family of fibers $\{ F(U_{i}) \}_{i \in I}$ over that cover.  We can pick one section (i.e., one element) from each such fiber to get a slice of elements that spans all of the fibers over that cover. Let us call such a choice a selection of patch candidates.


% ----------------------------------------
\begin{Definition}[Patch candidates]

Given a presheaf $F$ and a cover $\{ U_{i} \}_{i \in I}$ with a corresponding family of fibers $\{ F(U_{i}) \}_{i \in I}$, a selection of patch candidates $\{ s_{i} \}_{i \in I}$ is a choice of one section $s_{i}$ from each $F(U_{i})$:

$$\{ s_{i} \}_{i \in I} = \{ s_{i} \mid s_{i} \in F(U_{i}) \text{ for each } F(U_{i}) \in \{ F(U_{i}) \}_{i \in I} \}.$$

\end{Definition}


% ----------------------------------------
\begin{Example}

Take the presheaf from \cref{ex:presheaf}:

\begin{diagram}

\node (U) at (0, 3) {$U$};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed] (bottom) to (V);
\draw[dashed] (bottom) to (W);
\draw[dashed] (V) to (U);
\draw[dashed] (W) to (U);

\draw (0, 3.25) to (0, 3.775);
\draw (0, 4.625) ellipse (1.1cm and 1.1cm);
\node[dot, label=above:{$a$}] at (-0.375, 4.1) {};
\node[dot, label=above:{$b$}] at (-0.375, 4.85) {};
\node[dot, label=above:{$c$}] at (0.375, 4.1) {};
\node[dot, label=above:{$d$}] at (0.375, 4.85) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] at (-2, 2.5) {};
\node[dot, label=above:{$b$}] at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$c$}] at (2, 2.5) {};
\node[dot, label=above:{$d$}] at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.25) ellipse (0.375cm and 0.575cm);
\node[dot, label=above:{$\ast$}] at (0, 1) {};

\end{diagram}

Let $\{ V, W \}$ be the cover of interest:

\begin{diagram}

\draw[fill=selected] (-2, 1.5) ellipse (0.5cm and 0.5cm);
\draw[fill=selected] (2, 1.5) ellipse (0.5cm and 0.5cm);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {\textcolor{faded}{$\bottom/$}};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw[faded] (0, 3.25) to (0, 3.775);
\draw[faded] (0, 4.625) ellipse (1.1cm and 1.1cm);
\node[dot, label=above:{\textcolor{faded}{$a$}}, faded] at (-0.375, 4.1) {};
\node[dot, label=above:{\textcolor{faded}{$b$}}, faded] at (-0.375, 4.85) {};
\node[dot, label=above:{\textcolor{faded}{$c$}}, faded] at (0.375, 4.1) {};
\node[dot, label=above:{\textcolor{faded}{$d$}}, faded] at (0.375, 4.85) {};

\draw[faded] (-2, 1.75) to (-2, 2.275);
\draw[faded] (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{\textcolor{faded}{$a$}}, faded] at (-2, 2.5) {};
\node[dot, label=above:{\textcolor{faded}{$b$}}, faded] at (-2, 3.25) {};

\draw[faded] (2, 1.75) to (2, 2.275);
\draw[faded] (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{\textcolor{faded}{$c$}}, faded] at (2, 2.5) {};
\node[dot, label=above:{\textcolor{faded}{$d$}}, faded] at (2, 3.25) {};

\draw[faded] (0, 0.25) to (0, 0.75);
\draw[faded] (0, 1.25) ellipse (0.375cm and 0.575cm);
\node[dot, label=above:{\textcolor{faded}{$\ast$}}, faded] at (0, 1) {};

\end{diagram}

Over this cover, we have a corresponding family of fibers:

\begin{diagram}

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {\textcolor{faded}{$\bottom/$}};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw[faded] (0, 3.25) to (0, 3.775);
\draw[faded] (0, 4.625) ellipse (1.1cm and 1.1cm);
\node[dot, label=above:{\textcolor{faded}{$a$}}, faded] at (-0.375, 4.1) {};
\node[dot, label=above:{\textcolor{faded}{$b$}}, faded] at (-0.375, 4.85) {};
\node[dot, label=above:{\textcolor{faded}{$c$}}, faded] at (0.375, 4.1) {};
\node[dot, label=above:{\textcolor{faded}{$d$}}, faded] at (0.375, 4.85) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] at (-2, 2.5) {};
\node[dot, label=above:{$b$}] at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$c$}] at (2, 2.5) {};
\node[dot, label=above:{$d$}] at (2, 3.25) {};

\draw[faded] (0, 0.25) to (0, 0.75);
\draw[faded] (0, 1.25) ellipse (0.375cm and 0.575cm);
\node[dot, label=above:{\textcolor{faded}{$\ast$}}, faded] at (0, 1) {};

\end{diagram}

A selection of patch candidates is a choice of one section (element) from each fiber. For instance, we might pick $b$ from $F(V)$ and $c$ from $F(W)$:

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.5, 3.4) rectangle (-1.5, 3.1);
\draw[rounded corners=4pt,fill=selected] (1.5, 2.65) rectangle (2.5, 2.35);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {\textcolor{faded}{$\bottom/$}};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw[faded] (0, 3.25) to (0, 3.775);
\draw[faded] (0, 4.625) ellipse (1.1cm and 1.1cm);
\node[dot, label=above:{\textcolor{faded}{$a$}}, faded] at (-0.375, 4.1) {};
\node[dot, label=above:{\textcolor{faded}{$b$}}, faded] at (-0.375, 4.85) {};
\node[dot, label=above:{\textcolor{faded}{$c$}}, faded] at (0.375, 4.1) {};
\node[dot, label=above:{\textcolor{faded}{$d$}}, faded] at (0.375, 4.85) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] at (-2, 2.5) {};
\node[dot, label=above:{$b$}] at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$c$}] at (2, 2.5) {};
\node[dot, label=above:{$d$}] at (2, 3.25) {};

\draw[faded] (0, 0.25) to (0, 0.75);
\draw[faded] (0, 1.25) ellipse (0.375cm and 0.575cm);
\node[dot, label=above:{\textcolor{faded}{$\ast$}}, faded] at (0, 1) {};

\end{diagram}

Similarly, we might pick $\{ a, d \}$, $\{ b, d \}$, or $\{a, c \}$, each of which is a valid selection of patch candidates.

\end{Example}

% ----------------------------------------
\begin{Remark}

Consider the empty cover. Since there are no sub-regions below the least element of a locale, there are no patch candidates we could choose for the empty cover either. Hence, any selection of patch candidates for the empty cover is $\EmptySet/$.

\end{Remark}


A selection of patch candidates might fit together, or they might not. We say they are compatible if they fit together, i.e., if they agree on overlaps. To check this, take any pair of patch candidates, and check if they restrict to the same data on their overlap.

% ----------------------------------------
\begin{Definition}[Compatible patch candidates]

Given two fibers $F(U_{i})$ and $F(U_{j})$ and a patch candidate from each, $s_{i} \in F(U_{i})$ and $s_{j} \in F(U_{j})$, $s_{i}$ and $s_{j}$ are compatible if they restrict to the same data on their overlap $U_{i} \meet/ U_{j}$:
$$\restrict{U_{i}}{U_{i} \meet/ U_{j}}(s_{i}) 
    = 
    \restrict{U_{j}}{U_{i} \meet/ U_{j}}(s_{j}).$$

\noindent
A selection of patch candidates $\{ s_{i} \}_{i \in I}$ is compatible if all of its members are pair-wise compatible.

\end{Definition}


% ----------------------------------------
\begin{Example}
\label{ex:compatible-patch-candidates}

Consider the following presheaf $F$:

\begin{diagram}

\node (U) at (0, 3) {$U$};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed] (bottom) to (V);
\draw[dashed] (bottom) to (W);
\draw[dashed] (V) to (U);
\draw[dashed] (W) to (U);

\draw (0, 3.25) to (0, 3.75);
\draw (0, 4.925) ellipse (0.425cm and 1.325cm);
\node[dot, label=above:{$a$}] (Ua) at (0, 4) {};
\node[dot, label=above:{$b$}] (Ub) at (0, 4.75) {};
\node[dot, label=above:{$c$}] (Uc) at (0, 5.5) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$b$}] (Wb) at (2, 2.5) {};
\node[dot, label=above:{$c$}] (Wc) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.5) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$p$}] (bottomp) at (0, 1) {};
\node[dot, label=above:{$q$}] (bottomq) at (0, 1.75) {};

\draw[arrow, ->] (Uc) to (Vb);
\draw[arrow, ->] (Ub) to (Vb);
\draw[arrow, ->] (Ua) to (Va);
\node at (-1.25, 4.5) {$\restrict{U}{V}$};

\draw[arrow, ->] (Ua) to (Wb);
\draw[arrow, ->] (Ub) to (Wb);
\draw[arrow, ->] (Uc) to (Wc);
\node at (1.675, 4.5) {$\restrict{U}{W}$};

\draw[arrow, ->] (Vb) to (bottomq);
\draw[arrow, ->] (Va) to (bottomp);
\node at (-1.25, 1.5) {$\restrict{V}{\bottom/}$};

\draw[arrow, ->] (Wb) to (bottomq);
\draw[arrow, ->] (Wc) to (bottomp);
\node at (1, 1.5) {$\restrict{W}{\bottom/}$};

\end{diagram}

Take the cover $\{ V, W \}$ and its corresponding fibers:

\begin{diagram}

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {\textcolor{faded}{$\bottom/$}};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$b$}] (Wb) at (2, 2.5) {};
\node[dot, label=above:{$c$}] (Wc) at (2, 3.25) {};

\end{diagram}

Suppose we pick $\{ a, c \}$ for patch candidates:

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.5, 2.65) rectangle (-1.5, 2.35);
\draw[rounded corners=4pt,fill=selected] (1.5, 3.4) rectangle (2.5, 3.1);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {\textcolor{faded}{$\bottom/$}};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$b$}] (Wb) at (2, 2.5) {};
\node[dot, label=above:{$c$}] (Wc) at (2, 3.25) {};

\end{diagram}

Is this selection compatible? We have to check if they agree on their overlap. The overlap $V \meet/ W$ is $\bottom/$. Where does $\restrict{V}{\bottom/}$ send our chosen patch candidate $a$? It sends it to $p$, since $\restrict{V}{\bottom/}(a) = p$. Where does $\restrict{W}{\bottom/}$ send our other chosen patch candidate $b$? It also sends it to $p$, since $\restrict{W}{\bottom/}(c) = p$. On the overlap $\bottom/$ then, $\restrict{V}{\bottom/}(a) = \restrict{W}{\bottom/}(c)$, so $a$ and $c$ are compatible. This is easy to see in the diagram, since $a$ and $b$ both get sent to the same place:

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.5, 2.65) rectangle (-1.5, 2.35);
\draw[rounded corners=4pt,fill=selected] (1.5, 3.4) rectangle (2.5, 3.1);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$b$}] (Wb) at (2, 2.5) {};
\node[dot, label=above:{$c$}] (Wc) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.5) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$p$}] (bottomp) at (0, 1) {};
\node[dot, label=above:{\textcolor{faded}{$q$}}, faded] (bottomq) at (0, 1.75) {};

\draw[arrow, ->, faded] (Vb) to (bottomq);
\draw[arrow, ->] (Va) to (bottomp);
\node at (-1.25, 1.5) {$\restrict{V}{\bottom/}$};

\draw[arrow, ->, faded] (Wb) to (bottomq);
\draw[arrow, ->] (Wc) to (bottomp);
\node at (1, 1.5) {$\restrict{W}{\bottom/}$};

\end{diagram}

Now suppose we pick $\{ b, b \}$ for patch candidates:

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.5, 3.4) rectangle (-1.5, 3.1);
\draw[rounded corners=4pt,fill=selected] (1.5, 2.65) rectangle (2.5, 2.35);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {\textcolor{faded}{$\bottom/$}};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$b$}] (Wb) at (2, 2.5) {};
\node[dot, label=above:{$c$}] (Wc) at (2, 3.25) {};

\end{diagram}

These are also compatible. They agree on their overlap (both restrict to $q$):

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.5, 3.4) rectangle (-1.5, 3.1);
\draw[rounded corners=4pt,fill=selected] (1.5, 2.65) rectangle (2.5, 2.35);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$b$}] (Wb) at (2, 2.5) {};
\node[dot, label=above:{$c$}] (Wc) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.5) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{\textcolor{faded}{$p$}}, faded] (bottomp) at (0, 1) {};
\node[dot, label=above:{$q$}] (bottomq) at (0, 1.75) {};

\draw[arrow, ->] (Vb) to (bottomq);
\draw[arrow, ->, faded] (Va) to (bottomp);
\node at (-1.25, 1.5) {$\restrict{V}{\bottom/}$};

\draw[arrow, ->, faded] (Wc) to (bottomp);
\draw[arrow, ->] (Wb) to (bottomq);
\node at (1, 1.5) {$\restrict{W}{\bottom/}$};

\end{diagram}

Finally, suppose we pick $\{ a, b \}$ for patch candidates:

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.5, 2.65) rectangle (-1.5, 2.35);
\draw[rounded corners=4pt,fill=selected] (1.5, 2.65) rectangle (2.5, 2.35);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {\textcolor{faded}{$\bottom/$}};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$b$}] (Wb) at (2, 2.5) {};
\node[dot, label=above:{$c$}] (Wc) at (2, 3.25) {};

\end{diagram}

These are not compatible. They do not agree on their overlap:

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.5, 2.65) rectangle (-1.5, 2.35);
\draw[rounded corners=4pt,fill=selected] (1.5, 2.65) rectangle (2.5, 2.35);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$b$}] (Wb) at (2, 2.5) {};
\node[dot, label=above:{$c$}] (Wc) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.5) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$p$}] (bottomp) at (0, 1) {};
\node[dot, label=above:{$q$}] (bottomq) at (0, 1.75) {};

\draw[arrow, ->, faded] (Vb) to (bottomq);
\draw[arrow, ->] (Va) to (bottomp);
\node at (-1.25, 1.5) {$\restrict{V}{\bottom/}$};

\draw[arrow, ->, faded] (Wc) to (bottomp);
\draw[arrow, ->] (Wb) to (bottomq);
\node at (1, 1.5) {$\restrict{W}{\bottom/}$};

\end{diagram}

\end{Example}

% ----------------------------------------
\begin{Remark}

Consider the empty cover. Since any selection of patch candidates for the empty cover is empty, compatibility is satisfied vacuously. 

As an analogy, if you ask your class to turn off all cell phones but nobody brought a cell phone to class, then your request is satisfied vacuously: there is simply nothing that needs to be done to make it happen. It's similar with the empty cover: since there are no patch candidates to check, compatibility is achieved vacuously.

\end{Remark}


If a selection of patch candidates $s_{i}$, \ldots, $s_{k}$ across a cover of $U$ is compatible, we say those patches glue together if if there's a section $s$ in $F(U)$ that restricts down to exactly those patches.

% ----------------------------------------
 \begin{Definition}[Gluing]

Given a presheaf $F$ and a selection of compatible patch candidates $\{ s_{i} \}_{i \in I}$ for a cover $\{ U_{i} \}_{i \in I}$, $\{ s_{i} \}_{i \in I}$ glue together only if there is a section $s \in F(U)$ that restricts down to $s_{i}$ on each fiber $F(U_{i})$ of the cover, i.e., only if $s$ is such that:
\[
\restrict{U}{U_{i}}(s) = s_{i}, \text{ for each } i \in I.
\]

\noindent
As a matter of terminology, if a section $s \in F(U)$ is glued from patches $\{ s_{i} \}_{i \in I}$, we say that $s$ is a global section of the cover, and each $s_{i}$ is a local section of the cover. We may also say variously that $s$ is \emph{glued from} those patches, that $s$ is \emph{composed} of those patches, that those patches \emph{compose} $s$, or that gluing those patches \emph{yields} $s$.

A selection of patches $\{ s_{i} \}_{i \in I}$ glues uniquely if there is one and only one such section $s \in F(U)$ that is glued from them.
 
\end{Definition}


% ----------------------------------------
\begin{Example}
\label{ex:gluing}
 
Take the presheaf from \cref{ex:compatible-patch-candidates}, and consider the cover $\{ V, W \}$ again. Take the the selection of patches $\{ a, c \}$, which are compatible because they agree on overlap:

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.5, 2.65) rectangle (-1.5, 2.35);
\draw[rounded corners=4pt,fill=selected] (1.5, 3.4) rectangle (2.5, 3.1);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw[faded] (0, 3.25) to (0, 3.75);
\draw[faded] (0, 4.925) ellipse (0.425cm and 1.325cm);
\node[dot, label=above:{\textcolor{faded}{$a$}}, faded] (Ua) at (0, 4) {};
\node[dot, label=above:{\textcolor{faded}{$b$}}, faded] (Ub) at (0, 4.75) {};
\node[dot, label=above:{\textcolor{faded}{$c$}}, faded] (Uc) at (0, 5.5) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$b$}] (Wb) at (2, 2.5) {};
\node[dot, label=above:{$c$}] (Wc) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.5) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$p$}] (bottomp) at (0, 1) {};
\node[dot, label=above:{\textcolor{faded}{$q$}}, faded] (bottomq) at (0, 1.75) {};

(\draw[arrow,->, faded] (Uc) to (Vb);
\draw[arrow, ->, faded] (Ub) to (Vb);
\draw[arrow, ->, faded] (Ua) to (Va);
\node at (-1.25, 4.5) {\textcolor{faded}{$\restrict{U}{V}$}};

\draw[arrow, ->, faded] (Ua) to (Wb);
\draw[arrow, ->, faded] (Ub) to (Wb);
\draw[arrow, ->, faded] (Uc) to (Wc);
\node at (1.675, 4.5) {\textcolor{faded}{$\restrict{U}{W}$}};

\draw[arrow, ->, faded] (Vb) to (bottomq);
\draw[arrow, ->] (Va) to (bottomp);
\node at (-1.25, 1.5) {$\restrict{V}{\bottom/}$};

\draw[arrow, ->, faded] (Wb) to (bottomq);
\draw[arrow, ->] (Wc) to (bottomp);
\node at (1, 1.5) {$\restrict{W}{\bottom/}$};

\end{diagram}

Even though $a$ and $c$ are compatible, they do not glue together, because there is no section in $F(U)$ that restricts down to them. Consider $a \in F(U)$ first. It restricts to $a \in F(V)$ on the left, but it does not restrict to $c \in F(W)$ on the right:

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.5, 2.65) rectangle (-1.5, 2.35);
\draw[rounded corners=4pt,fill=selected] (1.5, 3.4) rectangle (2.5, 3.1);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw[faded] (0, 3.25) to (0, 3.75);
\draw[faded] (0, 4.925) ellipse (0.425cm and 1.325cm);
\node[dot, label=above:{$a$}] (Ua) at (0, 4) {};
\node[dot, label=above:{\textcolor{faded}{$b$}}, faded] (Ub) at (0, 4.75) {};
\node[dot, label=above:{\textcolor{faded}{$c$}}, faded] (Uc) at (0, 5.5) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$b$}] (Wb) at (2, 2.5) {};
\node[dot, label=above:{$c$}] (Wc) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.5) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$p$}] (bottomp) at (0, 1) {};
\node[dot, label=above:{\textcolor{faded}{$q$}}, faded] (bottomq) at (0, 1.75) {};

\draw[arrow, ->, faded] (Vb) to (bottomq);
\draw[arrow, ->] (Va) to (bottomp);
\node at (-1.25, 1.5) {$\restrict{V}{\bottom/}$};

\draw[arrow, ->, faded] (Wb) to (bottomq);
\draw[arrow, ->] (Wc) to (bottomp);
\node at (1, 1.5) {$\restrict{W}{\bottom/}$};

(\draw[arrow,->, faded] (Uc) to (Vb);
\draw[arrow, ->, faded] (Ub) to (Vb);
\draw[arrow, ->] (Ua) to (Va);
\node at (-1.25, 4.5) {\textcolor{faded}{$\restrict{U}{V}$}};

\draw[arrow, ->] (Ua) to (Wb);
\draw[arrow, ->, faded] (Ub) to (Wb);
\draw[arrow, ->, faded] (Uc) to (Wc);
\node at (1.675, 4.5) {\textcolor{faded}{$\restrict{U}{W}$}};

\draw[ultra thick, wrong] (-0.3, 4.3) to (0.3, 3.6);
\draw[ultra thick, wrong] (0.3, 4.3) to (-0.3, 3.6);

\end{diagram}

As for $b \in F(U)$, it restricts to neither $a \in F(V)$  on the left nor $c \in F(W)$ on the right:

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.5, 2.65) rectangle (-1.5, 2.35);
\draw[rounded corners=4pt,fill=selected] (1.5, 3.4) rectangle (2.5, 3.1);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw[faded] (0, 3.25) to (0, 3.75);
\draw[faded] (0, 4.925) ellipse (0.425cm and 1.325cm);
\node[dot, label=above:{\textcolor{faded}{$a$}}, faded] (Ua) at (0, 4) {};
\node[dot, label=above:{$b$}] (Ub) at (0, 4.75) {};
\node[dot, label=above:{\textcolor{faded}{$c$}}, faded] (Uc) at (0, 5.5) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$b$}] (Wb) at (2, 2.5) {};
\node[dot, label=above:{$c$}] (Wc) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.5) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$p$}] (bottomp) at (0, 1) {};
\node[dot, label=above:{\textcolor{faded}{$q$}}, faded] (bottomq) at (0, 1.75) {};

\draw[arrow, ->, faded] (Vb) to (bottomq);
\draw[arrow, ->] (Va) to (bottomp);
\node at (-1.25, 1.5) {$\restrict{V}{\bottom/}$};

\draw[arrow, ->, faded] (Wb) to (bottomq);
\draw[arrow, ->] (Wc) to (bottomp);
\node at (1, 1.5) {$\restrict{W}{\bottom/}$};

(\draw[arrow,->, faded] (Uc) to (Vb);
\draw[arrow, ->] (Ub) to (Vb);
\draw[arrow, ->, faded] (Ua) to (Va);
\node at (-1.25, 4.5) {\textcolor{faded}{$\restrict{U}{V}$}};

\draw[arrow, ->, faded] (Ua) to (Wb);
\draw[arrow, ->] (Ub) to (Wb);
\draw[arrow, ->, faded] (Uc) to (Wc);
\node at (1.675, 4.5) {\textcolor{faded}{$\restrict{U}{W}$}};

\draw[ultra thick, wrong] (-0.3, 5.2) to (0.3, 4.6);
\draw[ultra thick, wrong] (0.3, 5.2) to (-0.3, 4.6);

\end{diagram}

Finally, $c \in F(U)$ restricts to $c \in F(W)$ on the right, but not to $a \in F(V)$ on the left:

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.5, 2.65) rectangle (-1.5, 2.35);
\draw[rounded corners=4pt,fill=selected] (1.5, 3.4) rectangle (2.5, 3.1);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw[faded] (0, 3.25) to (0, 3.75);
\draw[faded] (0, 4.925) ellipse (0.425cm and 1.325cm);
\node[dot, label=above:{\textcolor{faded}{$a$}}, faded] (Ua) at (0, 4) {};
\node[dot, label=above:{\textcolor{faded}{$b$}}, faded] (Ub) at (0, 4.75) {};
\node[dot, label=above:{$c$}] (Uc) at (0, 5.5) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$b$}] (Wb) at (2, 2.5) {};
\node[dot, label=above:{$c$}] (Wc) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.5) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$p$}] (bottomp) at (0, 1) {};
\node[dot, label=above:{\textcolor{faded}{$q$}}, faded] (bottomq) at (0, 1.75) {};

\draw[arrow, ->, faded] (Vb) to (bottomq);
\draw[arrow, ->] (Va) to (bottomp);
\node at (-1.25, 1.5) {$\restrict{V}{\bottom/}$};

\draw[arrow, ->, faded] (Wb) to (bottomq);
\draw[arrow, ->] (Wc) to (bottomp);
\node at (1, 1.5) {$\restrict{W}{\bottom/}$};

(\draw[arrow,->] (Uc) to (Vb);
\draw[arrow, ->, faded] (Ub) to (Vb);
\draw[arrow, ->, faded] (Ua) to (Va);
\node at (-1.25, 4.5) {\textcolor{faded}{$\restrict{U}{V}$}};

\draw[arrow, ->, faded] (Ua) to (Wb);
\draw[arrow, ->, faded] (Ub) to (Wb);
\draw[arrow, ->] (Uc) to (Wc);
\node at (1.675, 4.5) {\textcolor{faded}{$\restrict{U}{W}$}};

\draw[ultra thick, wrong] (-0.3, 5.9) to (0.3, 5.3);
\draw[ultra thick, wrong] (0.3, 5.9) to (-0.3, 5.3);

\end{diagram}

Thus, none of $a$, $b$, or $c$ in $F(U)$ are glued from $\{ a, c \}$, because none of them decompose into $a$ on the left and $c$ on the right.

Now suppose we pick $\{ b, b \}$ for patch candidates. These do glue together (trivially), because there is a section in $F(U)$ (namely $b \in F(U)$) that restricts down to $b \in F(V)$ on the left and $b \in F(W)$ on the right:

\begin{diagram}

\draw[rounded corners=4pt,fill=selected] (-2.5, 3.4) rectangle (-1.5, 3.1);
\draw[rounded corners=4pt,fill=selected] (1.5, 2.65) rectangle (2.5, 2.35);

\node (U) at (0, 3) {\textcolor{faded}{$U$}};
\node (V) at (-2, 1.5) {$V$};
\node (W) at (2, 1.5) {$W$};
\node (bottom) at (0, 0) {$\bottom/$};

\draw[dashed,faded] (bottom) to (V);
\draw[dashed,faded] (bottom) to (W);
\draw[dashed,faded] (V) to (U);
\draw[dashed,faded] (W) to (U);

\draw[faded] (0, 3.25) to (0, 3.75);
\draw[faded] (0, 4.925) ellipse (0.425cm and 1.325cm);
\node[dot, label=above:{\textcolor{faded}{$a$}}, faded] (Ua) at (0, 4) {};
\node[dot, label=above:{$b$}] (Ub) at (0, 4.75) {};
\node[dot, label=above:{\textcolor{faded}{$c$}}, faded] (Uc) at (0, 5.5) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$a$}] (Va) at (-2, 2.5) {};
\node[dot, label=above:{$b$}] (Vb) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2, 3.1) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{$b$}] (Wb) at (2, 2.5) {};
\node[dot, label=above:{$c$}] (Wc) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.75);
\draw (0, 1.5) ellipse (0.375cm and 0.875cm);
\node[dot, label=above:{\textcolor{faded}{$p$}}, faded] (bottomp) at (0, 1) {};
\node[dot, label=above:{$q$}] (bottomq) at (0, 1.75) {};

\draw[arrow, ->, faded] (Uc) to (Vb);
\draw[arrow, ->] (Ub) to (Vb);
\draw[arrow, ->, faded] (Ua) to (Va);
\node at (-1.25, 4.5) {\textcolor{faded}{$\restrict{U}{V}$}};

\draw[arrow, ->, faded] (Ua) to (Wb);
\draw[arrow, ->] (Ub) to (Wb);
\draw[arrow, ->, faded] (Uc) to (Wc);
\node at (1.675, 4.5) {\textcolor{faded}{$\restrict{U}{W}$}};

\draw[arrow, ->] (Vb) to (bottomq);
\draw[arrow, ->, faded] (Va) to (bottomp);
\node at (-1.25, 1.5) {$\restrict{V}{\bottom/}$};

\draw[arrow, ->, faded] (Wc) to (bottomp);
\draw[arrow, ->] (Wb) to (bottomq);
\node at (1, 1.5) {$\restrict{W}{\bottom/}$};

\end{diagram}
 
\end{Example}

% ----------------------------------------
\begin{Example}
\label{ex:robot}

Consider an example that glues together behaviors. Imagine a toy robot that looks something like a small tank: it has tracks on the left and right sides, and the two tracks are connected by a single drive controller. The controller either drives at a constant speed, or it sits idle. When it drives, it turns both tracks at the same speed.

Let's represent the robot as a locale. Let $LT$ and $RT$ be the left and right track assemblies respectively, let $D$ be the drive controller that is shared by $LT$ and $RT$, and let $R$ be the whole robot (the join of $LT$ and $RT$). As a picture:

\begin{diagram}

\node (R) at (0, 3) {$R$};
\node (LT) at (-2, 1.5) {$LT$};
\node (RT) at (2, 1.5) {$RT$};
\node (D) at (0, 0) {$D$};

\draw[] (D) to (LT);
\draw[] (D) to (RT);
\draw[] (LT) to (R);
\draw[] (RT) to (R);

\end{diagram}

For a presheaf, let's assign to each region the behaviors that are locally observable at that region:

\begin{itemize}

\item The drive controller $D$ can either $drive$ (turn) or sit $idle$. 
\item The left track assembly can each either $move_{L}$ or $stand\mhyphen still_{L}$.
\item The right track assembly can also either $move_{R}$ or $stand\mhyphen still_{R}$.
\item The entire robot can either move $forward$ or $sit$ stationary.

\end{itemize}

\noindent
In a picture:

\begin{diagram}

\node (R) at (0, 3) {$R$};
\node (LT) at (-2, 1.5) {$LT$};
\node (RT) at (2, 1.5) {$RT$};
\node (D) at (0, 0) {$D$};

\draw[dashed] (D) to (LT);
\draw[dashed] (D) to (RT);
\draw[dashed] (LT) to (R);
\draw[dashed] (RT) to (R);

\draw (0, 3.25) to (0, 3.75);
\draw (0, 4.5) ellipse (0.75cm and 1cm);
\node[dot, label=above:{\small{$sit$}}] (sit) at (0, 4.75) {};
\node[dot, label=above:{\small{$forward$}}] (move) at (0, 4) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2.5, 2.9) ellipse (1cm and 0.8cm);
\node[dot, label=left:{\small{$move_{L}$}}] (left-turn) at (-2, 2.6) {};
\node[dot, label=left:{\small{$stand\mhyphen still_{L}$}}] (left-stand) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2.5, 2.9) ellipse (1cm and 0.8cm);
\node[dot, label=right:{\small{$move_{R}$}}] (right-turn) at (2, 2.6) {};
\node[dot, label=right:{\small{$stand\mhyphen still_{R}$}}] (right-stand) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.5);
\draw (0, 1.5) ellipse (0.75cm and 1cm);
\node[dot, label=below:{\small{$drive$}}] (drive) at (0, 1.25) {};
\node[dot, label=below:{\small{$idle$}}] (idle) at (0, 2) {};

\end{diagram}

For the restriction maps, let's say that they restrict the observable behavior of a larger region to the observable behavior of the smaller region. For instance, if you are observing the whole robot moving forward ($forward$), and you then ``zoom in'' on the left track assembly, you'll see those tracks rotating ($move_{L}$).

\begin{itemize}

\item $\restrict{R}{LT}(sit) = stand\mhyphen still_{L}$, $\restrict{R}{LT}(forward) = move_{L}$.
\item $\restrict{R}{RT}(sit) = stand\mhyphen still_{R}$, $\restrict{R}{RT}(forward) = move_{R}$.
\item $\restrict{LT}{D}(stand\mhyphen still_{L}) = idle$, $\restrict{LT}{D}(move_{L}) = drive$.
\item $\restrict{RT}{D}(stand\mhyphen still_{R}) = idle$, $\restrict{RT}{D}(move_{R}) = drive$.

\end{itemize}

In a picture:

\begin{diagram}

\node (R) at (0, 3) {$R$};
\node (LT) at (-2, 1.5) {$LT$};
\node (RT) at (2, 1.5) {$RT$};
\node (D) at (0, 0) {$D$};

\draw[dashed] (D) to (LT);
\draw[dashed] (D) to (RT);
\draw[dashed] (LT) to (R);
\draw[dashed] (RT) to (R);

\draw (0, 3.25) to (0, 3.75);
\draw (0, 4.5) ellipse (0.75cm and 1cm);
\node[dot, label=above:{\small{$sit$}}] (sit) at (0, 4.75) {};
\node[dot, label=above:{\small{$forward$}}] (move) at (0, 4) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2.5, 2.9) ellipse (1cm and 0.8cm);
\node[dot, label=left:{\small{$move_{L}$}}] (left-turn) at (-2, 2.6) {};
\node[dot, label=left:{\small{$stand\mhyphen still_{L}$}}] (left-stand) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2.5, 2.9) ellipse (1cm and 0.8cm);
\node[dot, label=right:{\small{$move_{R}$}}] (right-turn) at (2, 2.6) {};
\node[dot, label=right:{\small{$stand\mhyphen still_{R}$}}] (right-stand) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.5);
\draw (0, 1.5) ellipse (0.75cm and 1cm);
\node[dot, label=below:{\small{$drive$}}] (drive) at (0, 1.25) {};
\node[dot, label=below:{\small{$idle$}}] (idle) at (0, 2) {};

\draw[arrow, ->] (move) to (left-turn);
\draw[arrow, ->] (sit) to (left-stand);
\node at (-1.65, 4.375) {$\restrict{R}{LT}$};

\draw[arrow, ->] (move) to (right-turn);
\draw[arrow, ->] (sit) to (right-stand);
\node at (1.65, 4.375) {$\restrict{R}{RT}$};

\draw[arrow, ->] (left-turn) to (drive);
\draw[arrow, ->] (left-stand) to (idle);
\node at (-1.25, 1.5) {$\restrict{LT}{D}$};

\draw[arrow, ->] (right-turn) to (drive);
\draw[arrow, ->] (right-stand) to (idle);
\node at (1.25, 1.5) {$\restrict{RT}{D}$};

\end{diagram}

Now take the cover $\{ LT, RT \}$ of $R$. The patch candidates $\{ move_{L}, move_{R} \}$ are compatible, because they agree on overlap (they both restrict down to $drive$). But they also glue uniquely, yielding $forward$. In other words, the robot's forward motion is patched together precisely from the two pieces of its cover, namely the left tracks rotating ($move_{L}$) and the right tracks rotating ($move_{R}$).

Similarly, the Robot's sitting still ($sit$) behavior is also glued from the two pieces of its cover, namely the left track assembly standing still ($stand\mhyphen still_{L}$) and the right track assembly standing still ($stand\mhyphen still_{R}$).

Thus, there are two global sections of $R$'s behavior: moving forwards (patched together from its left and right motions), or standing still (patched together from its left and right lack of motion). 

\end{Example}
 
We can now state what it is to be a sheaf. A sheaf is a presheaf that satisfies a special gluing condition: namely, that for every cover, every compatible selection of patch candidates glues together uniquely.
 
\todo{Define separated presheaf here.}
 

% ----------------------------------------
\begin{Definition}[Sheaf]
 
A presheaf $F$ is a sheaf iff it satisfies the following condition (called ``the gluing condition''):

\begin{enumerate}

\item [(G0)] For every cover $\{ U_{i} \}_{i \in I}$ of a region $U$ and every selection of patch candidates $\{ s_{i} \}_{i \in I}$ for that cover, if $\{ s_{i} \}_{i \in I}$ are compatible, then there exists a unique gluing $s \in F(U)$ of $\{ s_{i} \}_{i \in I}$.

\end{enumerate}
 
\end{Definition}

% ----------------------------------------
\begin{Remark}

There is a subtlety regarding what sheaves look like over the least element of a locale. Note that the gluing condition is formulated as an implication. That is to say, it says that, for every cross-section of patch candidates, \emph{if} that cross-section can glue, \emph{then} it glues in exactly one way. 

Next, consider the fact that the cover over the least region of a locale is an empty cover. Since there are no patch candidates that need to be checked for compatibility, there is nothing that needs to be done to get a ``selection of gluable patch candidates.'' Hence, the antecedent of the gluing condition is satisfied vacuously over the least element of the locale.

But since the empty cover satisfies the antecedent of the gluing condition vacuously, it follows that if a presheaf is to qualify as a sheaf, it must ensure that the consequent is satisfied over the empty cover as well. In other words, it must assign a unique glued section (a singleton set) to the least region of the locale. So, even though a \emph{presheaf} may assign a larger set of data to the least element of a locale, a \emph{sheaf} always assigns a singleton to that region.

\end{Remark}


% ----------------------------------------
\begin{Example}

The presheaf from \cref{ex:compatible-patch-candidates} fails to be sheaf, because as we saw in \cref{ex:gluing}, there is a compatible selection of patch candidates (namely, $\{ a, c \}$) which fails to glue. To be a sheaf, every compatible selection of patch candidates must glue.

\end{Example}

% ----------------------------------------
\begin{Example}
\label{ex:robot-sheaf}

The presheaf from \cref{ex:robot} fails to be a sheaf, because it does not assign a singleton to the lowest region of the underlying locale. In that example $D$ is the lowest region of the locale, and $F(D) = \{ p, q \}$, a set containing two elements. Hence, $F$ fails to be a sheaf.

However, suppose we add a distinct bottom element to the locale:

\begin{diagram}

\node (R) at (0, 3) {$R$};
\node (LT) at (-2, 1.5) {$LT$};
\node (RT) at (2, 1.5) {$RT$};
\node (D) at (0, 0) {$D$};
\node (bottom) at (0, -1) {$\bottom/$};

\draw[] (D) to (bottom);
\draw[] (D) to (LT);
\draw[] (D) to (RT);
\draw[] (LT) to (R);
\draw[] (RT) to (R);

\end{diagram}

If we assign a singleton set to $\bottom/$ (so that $F(\bottom/) = \{ \ast \}$, say), then $F$ looks like this:

\begin{diagram}

\node (R) at (0, 3) {$R$};
\node (LT) at (-2, 1.5) {$LT$};
\node (RT) at (2, 1.5) {$RT$};
\node (D) at (0, 0) {$D$};
\node (bottom) at (0, -1.5) {$\bottom/$};

\draw[dashed] (D) to (bottom);
\draw[dashed] (D) to (LT);
\draw[dashed] (D) to (RT);
\draw[dashed] (LT) to (R);
\draw[dashed] (RT) to (R);

\draw (0, 3.25) to (0, 3.75);
\draw (0, 4.5) ellipse (0.75cm and 1cm);
\node[dot, label=above:{\small{$sit$}}] (sit) at (0, 4.75) {};
\node[dot, label=above:{\small{$move$}}] (move) at (0, 4) {};

\draw (-2, 1.75) to (-2, 2.275);
\draw (-2.5, 2.9) ellipse (1cm and 0.8cm);
\node[dot, label=left:{\small{$rotate_{L}$}}] (left-turn) at (-2, 2.6) {};
\node[dot, label=left:{\small{$stand_{L}$}}] (left-stand) at (-2, 3.25) {};

\draw (2, 1.75) to (2, 2.275);
\draw (2.5, 2.9) ellipse (1cm and 0.8cm);
\node[dot, label=right:{\small{$rotate_{R}$}}] (right-turn) at (2, 2.6) {};
\node[dot, label=right:{\small{$stand_{R}$}}] (right-stand) at (2, 3.25) {};

\draw (0, 0.25) to (0, 0.5);
\draw (0, 1.5) ellipse (0.75cm and 1cm);
\node[dot, label=below:{\small{$drive$}}] (drive) at (0, 1.25) {};
\node[dot, label=below:{\small{$idle$}}] (idle) at (0, 2) {};

\draw (0.25, -1.5) to (0.75, -1);
\draw (0.75, -0.65) ellipse (0.35cm and 0.5cm);
\node[dot, label=below:{\small{$\ast $}}] (asterisk) at (0.75, -0.575) {};

\draw[arrow, ->] (move) to (left-turn);
\draw[arrow, ->] (sit) to (left-stand);
\node at (-1.65, 4.375) {$\restrict{R}{LT}$};

\draw[arrow, ->] (move) to (right-turn);
\draw[arrow, ->] (sit) to (right-stand);
\node at (1.65, 4.375) {$\restrict{R}{RT}$};

\draw[arrow, ->] (left-turn) to (drive);
\draw[arrow, ->] (left-stand) to (idle);
\node at (-1.25, 1.5) {$\restrict{LT}{D}$};

\draw[arrow, ->] (right-turn) to (drive);
\draw[arrow, ->] (right-stand) to (idle);
\node at (1.25, 1.5) {$\restrict{RT}{D}$};

\draw[arrow, ->] (idle) to[out=325, in=80] (asterisk);
\draw[arrow, ->] (drive) to[out=335, in=85] (asterisk);
\node at (1.275, 0.25) {$\restrict{D}{\bottom/}$};

\end{diagram}

\noindent
This modification ensures that $F$ qualifies as a sheaf, since it ensures that \emph{all} gluable selections of patch candidates (including the empty one) glue uniquely.

\end{Example}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{A Canonical Sheaf Construction}

\noindent
Not every presheaf is a sheaf, since some presheaves fail the gluing condition. However, there is a canonical procedure called ``sheafification'' that turns any presheaf into a sheaf. To sheafify a presheaf, add any missing sections that glue, then quotient sections that are locally indistinguishable. The result is guaranteed to be a sheaf, by construction. 

For our purposes, there is a simplified version of sheafification that we can use to construct sheaves that model part-whole complexes in a natural way. Given a presentation of a locale, the recipe to build such a sheaf over it goes like this:

\begin{enumerate}

\item Assign local data to atomic regions.
\item Specify a gluing condition.
\item Recursively glue more and more pieces together until you can't glue any more.

\end{enumerate}

Let's make this more precise. Given a presented locale, we can uniquely write each region as the join of its atomic regions.


% ----------------------------------------
\begin{Definition}[Atomic indices]

Let $\category{L} = \tuple{G, R}$ be a presented locale with $G = \{ U_{1}, \ldots, U_{n} \}$. Let $\Index/ \subseteq \{ 0, \ldots, n \}$ be the indices of the atomic regions of $G$. 

For any $U \in \category{L}$, define its atomic support (denoted $\support/(U)$, or just $\support/$ for short) as:

\begin{equation*}
  \support/(U) = \{ i \in \Index/ \mid U_{i} \childOf/ U \}
\end{equation*}

\noindent
Then $U$ can be written canonically as $U_{\support/(U)}$, the join of its atomic supports:

\begin{equation*}
  U_{\support/(U)} = \bigjoin/\limits_{i \in \support/(U)} U_{i}.
\end{equation*}

\end{Definition}


\todo{Say something along the lines that there are many kinds of sheafs, and the fibers can have many different shapes. For instance, a standard example of a sheaf over a topological space is the set of real-valued functions defined over each region of that topology.}

We're going to focus on a simple kind of sparse sheaf. We will build this sheaf by assigning to atomic regions some basic data: to each atomic region $U_{k}$, we assign some piece of data $\{ \tuple{ b_{k} } \}$. What $b_{k}$ is doesn't matter for our purposes at the moment. It just needs to be some piece of atomic data.

Then, we will glue together a selection of patch candidates $\{ \tuple{ b_{1} } \}$, $\{ \tuple{ b_{2} } \}$, and so on of atomic pieces of data to form $\{ \tuple{b_{1}, b_{2}, \ldots } \}$. To decide when to glue such tuples together, we will define a gluing condition.

\todo{Talk about how we are going to imagine that each ``$b_{k}$'' represents something that occupies the region $U_{k}$. E.g., it's a chunk of matter, or a mechanical gadget, or whatever. But it is the part or stuff in that atomic region. The larger whole will then be built up by fusing together these parts according to the gluing condition.}

A gluing condition is a family of predicates that say when a selection of patch candidates glue.

% ----------------------------------------
\begin{Definition}[Gluing condition]

A gluing condition $\glues{}$ is a family of predicates

\[
  \glues{U}: \prod_{i \in \support/(U)} F(U_{i}) \to \{ \mathrm{true}, \mathrm{false} \},
\]

\noindent
i.e. for each region $U \in \category{L}$ a predicate over the Cartesian product of the fibers of the atomic support of $U$, that collectively satisfy the following coherence conditions:

\begin{enumerate}

\item [(G1)] \emph{Local data is glued}. If $U_{k} \in \atomsOf{\category{L}}$ and $F(U_{k}) = \{ \tuple{b_{k}} \}$, then

\[
  \glues{U_{k}}(\tuple{b_{k}}) = \mathrm{true}.
\]

\item [(G2)] \emph{Downward stability}. If $\glues{U}(\tuple{b_{i}}_{i \in \support/(U)}) = \mathrm{true}$, then for each $V \childOf/ U$, we must have:

\[
  \glues{V}(\restrict{U}{V}(\tuple{b_{i}}_{i \in \support/(U)})) = \mathrm{true}.
\]

\item [(G3)] \emph{Upward stability}. Given a selection of patch candidates $\tuple{b_{i}}_{i \in \support/(U)}$, if $\glues{U_{i} \join/ U_{j}}(\tuple{b_{i}, b_{j}}) = \mathrm{true}$ for each $i, j \in \support/(U)$, then we must have:

\[
  \glues{U}(\tuple{b_{i}}_{i \in \support/(U)}) = \mathrm{true}.
\]

\end{enumerate}

\end{Definition}

A sheaf can be generated from a gluing condition by starting with some local data on the atomic regions and then gluing all pieces together that satisfy the gluing condition.

% ----------------------------------------
\begin{Definition}[\Gsheaves/]
\label{def:g-sheaves}

Given a gluing condition $\glues{}$ and local data $F(U_{k}) = \{ \tuple{b_{k}} \}$ for each atomic region $U_{k}$, define for each region $U$:

\[
  F(U) = \{ \tuple{b_{i}}_{i \in \support/(U)} \in \prod_{i \in \support/(U)} F(U_{i}) 
    \mid \glues{U}(\tuple{b_{i}}_{i \in \support/(U)}) = \mathrm{true} \}.
\]

\noindent
For $V \childOf/ U$, define the restriction map

\[
  \restrict{U}{V}: F(U) \to F(V) 
    \quad\text{ as }\quad
    \restrict{U}{V}(\tuple{b_{i}}_{i \in \support/(U)}) = \tuple{b_{i}}_{i \in \support/(V)}.
\]

\noindent
Set $F(\bottom/) = \{ \tuple{} \}$, the empty tuple.

\end{Definition}

\begin{Remark}

Alternatively, given some local data and a gluing condition, define a presheaf over the given locale, call it $F_{\wp}$, that assigns all combinations of local data to each region:

\[
F_{\wp}(U) = \prod_{i \in \support/(U)} F(U_{i}).
\]

\noindent
Then filter by the gluing condition. That produces the same sheaf.

\end{Remark}

We must check that \cref{def:g-sheaves} really defines a sheaf. 

% ----------------------------------------
\begin{Theorem}[\Gsheaves/ are presheaves]

Given a gluing condition $\glues{}$ and an assignment of local data to the atomic regions of the underlying locale, the corresponding \Gsheaf/ is a presheaf.

\end{Theorem}

\begin{proof}

We must show that restrictions preserve identities and composition.

\begin{itemize}

\item \emph{Identities}. $\restrict{U}{U}$ projects to the same index set, so $\restrict{U}{U} = \ident{F(U)}$.

\item \emph{Composition}. $\restrict{U}{V}$ restricts to the fiber over $V$, and $\restrict{V}{W}$ restricts to the fiber over $W$, so $\restrict{V}{W} \compose/ \restrict{U}{V}$ = $\restrict{U}{W}$.

\end{itemize}

\noindent
We must also show that the restrictions are well defined. 

\begin{itemize}

\item For $V \childOf/ U$, if $\tuple{b_{i}}_{i \in \support/(U)} \in F(U)$, then by (G2) $\tuple{b_{i}}_{i \in \support/(V)}$ satisfies $\glues{V}$, so $\restrict{U}{V}$ is well-defined. \qedhere

\end{itemize}

\end{proof}

% ----------------------------------------
\begin{Theorem}[\Gsheaves/ are sheaves]

Given a gluing condition $\glues{}$ and an assignment of local data to the atomic regions of the underlying locale, the corresponding \Gsheaf/ satisfies the gluing condition G0.

\end{Theorem}

\begin{proof}

We must show that every gluable selection of patch candidates $\tuple{b_{i}}_{i \in \support/(U)}$ glues to yield a unique section in $F(U)$. Assume that we have a compatible selection of patch candidates $\tuple{b_{i}}_{i \in \support/(U)}$. Then:

\begin{itemize}

\item Existence: we assumed the patch candidates are compatible. By (G3) then, $\tuple{b_{i}}_{i \in \support/(U)} \in F(U)$.

\item Uniqueness: let $s = \tuple{b_{i}}_{i \in \support/(U)} \in F(U)$. If another section $t = \tuple{b_{i}}_{i \in \support/(U)} \in F(U)$ were glued from the same components, then $s = t$, since both restrict to the same supports. \qedhere

\end{itemize}

\end{proof}

Throughout the rest of this paper, we will use \Gsheaves/ to model part-whole complexes, but that is only for simplicity of exposition. Any sheaf over a locale would do just as well.
